
use v5.012;
use strict;
use warnings;

use IO::Socket::INET;

my $server = shift or die "No port or server specified";
my $port = shift or die "No port or server specified";
my $socket = IO::Socket::INET->new(
		PeerAddr => $server,
		PeerPort => $port,
		Proto    => 'tcp') or die "Couldn't create socket";

# receive info about color

for my $x (1..3)
{
	print <$socket>;
}
print "\n";

# wait for turn


my $responce = "";

do
{
	my $serverstate = <$socket>;
	if (index($serverstate, "Your turn"))
	{
		do
		{
			my $move = <STDIN>;
			print $socket $move;
			$responce = <$socket>;
		}while ($responce eq "Invalid move" or $responce eq "Invalid square");
		print <$socket>;
	}
}while(1);


close $socket;